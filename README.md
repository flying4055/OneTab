# OneTab

一个轻量级的浏览器新标签页导航插件，基于原生 JavaScript 与本地数据文件构建，可快速检索、管理与访问书签。

**功能清单**
已完成
1. 添加书签（弹层表单保存到本地）
2. 删除书签（弹层确认）
3. 编辑书签（右键菜单）
4. 右键菜单新增书签
5. 搜索栏输入时按书签中文名与域名进行匹配提示
6. 书签分类拖拽排序（顺序本地保存）
7. 书签图标拖拽排序（顺序本地保存）
8. 导出当前导航数据为 `nav.json`

待完成
1. 暂无

**技术架构**
- 插件类型：Chrome/Edge MV3 新标签页覆盖。
- 前端技术：原生 HTML/CSS/JavaScript。
- 数据来源：初始数据读取 `nav.json`，用户修改后持久化到 `localStorage`。

**目录结构**
1. `index.html`：页面结构。
2. `styles.css`：主题样式与组件样式。
3. `app.js`：核心逻辑与交互。
4. `nav.json`：初始导航数据。
5. `manifest.json`：扩展清单配置。

**数据格式**
`nav.json` 使用统一的数据格式：
```json
{
  "version": 1,
  "categories": [
    {
      "id": "1",
      "label": "主页",
      "items": [
        { "id": "site-xxx", "name": "哔哩哔哩", "url": "https://www.bilibili.com" }
      ]
    }
  ]
}
```

**本地存储**
- `nav_data_v1`：用户编辑后的完整导航数据（与 `nav.json` 同格式）。
- `favicon_cache_v1`：站点图标缓存（DataURL）。

**使用方式**
1. 打开浏览器扩展管理页，启用开发者模式。
2. 点击“加载已解压的扩展程序”，选择项目根目录。
3. 新建标签页即可看到导航页面。

**交互说明**
- 搜索栏输入时会显示匹配书签，点击即可打开。
- 右键书签图标：编辑、删除。
- 右键侧边栏：快速新增书签。
- 点击 Setting 打开设置弹层，可新增与导出书签。
- “保存排序”按钮会导出当前导航为 `nav.json`。

**开发说明**
- 默认图标来自站点 favicon，也支持在 `nav.json` 中提供 `src` 作为图标链接。

**常见问题**
1. 书签未更新？
清理 `localStorage` 的 `nav_data_v1` 后会重新读取 `nav.json`。
